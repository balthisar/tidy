<html lang='en'>
<head>
<meta charset='UTF-8'>
<meta content='index' name='robots'>
<meta content='0;url=../../index.html?localePath=en.lproj#/topic-advanced-use_tidylib' http-equiv='refresh'>
<meta content='This feature allows Balthisar Tidy to use the Tidy engine from the HTML Tidy project.' name='description'>
<title>Use a different version of LibTidy</title>
</head>
<body class='AppleTopic' dir='ltr' id='topic-advanced-use_tidylib'>
<figure class='topicIcon'>
  <img src="../../SharedGlobalArt/icon_256x256.png" srcset="../../SharedGlobalArt/icon_256x256.png 1x, ../../SharedGlobalArt/icon_256x256@2x.png 2x" alt="Icon 256x256" />
</figure>
<h1>Use a different version of LibTidy</h1>
<p class="warning">The instructions and discussion on this page are intended for advanced users
only. Some of the instructions require the use of the macOS terminal and
the <code>sudo</code> command. When <code>sudo</code> is abused or used improperly it has the
potential to affect your operating system.</p>

<p><em>Balthisar Tidy</em>, of course, uses LibTidy (<code>libtidy.dylib</code>) from the <a href="http://www.html-tidy.org/">HTML Tidy
Project</a>, and it is LibTidy that actually does the job of cleaning,
repairing, and diagnosing your HTML.</p>

<p>HTML Tidy (under leadership by HTACG) is developing rapidly once again, and
in many cases the Project will release new versions of Tidy faster than
<strong>balthisar.com</strong> can keep up. The good news, though, is that if you’re an
advanced user or not afraid to follow a couple of simple instructions, you can
setup your computer so that <em>Balthisar Tidy</em> will use different (presumably newer)
versions of <code>libtidy.dylib</code> installed by HTML Tidy.</p>

<h2 id="how-to-use-a-different-libtidy">How to Use a Different LibTidy</h2>

<ol>
  <li>
    <p>Find a copy of <a href="http://www.html-tidy.org/">HTML Tidy</a> to install, and install it. This will ensure that
LibTidy is installed in the correct location. And of course installing HTML Tidy
nicely updates the Mac’s built-in, Apple-supplied version from 2006.</p>
  </li>
  <li>
    <p>Create a symbolic link named <code>/usr/local/lib/libtidy-balthisar.dylib</code> that points to
the library that you want to use.</p>

    <ul>
      <li>
        <p>If you would like to use a specific version of <code>libtidy.dylib</code>, then use the
following in Terminal.app, substituting the version number you want to use below: <br />
<code>sudo ln -sf /usr/local/lib/libtidy.5.1.41.dylib /usr/local/lib/libtidy-balthisar.dylib</code> <br />
You could repeat this every time you install a new version of HTML Tidy, or any time
you would like to change the version of LibTidy that <em>Balthisar Tidy</em> uses.</p>
      </li>
      <li>
        <p>If you would simply like to use the most recently installed version (normally the newest
version) use this in Terminal.app: <br />
<code>sudo ln -sf /usr/local/lib/libtidy.dylib /usr/local/lib/libtidy-balthisar.dylib</code> <br />
HTML Tidy installers always ensure that <code>libtidy.dylib</code> refers to the most recently
installed version, so in this example any time you upgrade HTML Tidy,
<em>Balthisar Tidy</em> effectively receives an instant upgrade, too.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>To make <em>Balthisar Tidy</em> use its own, built-in version again, just remove the
symlink in Terminal.app:
<code>sudo rm /usr/local/lib/libtidy-balthisar.dylib</code></p>
  </li>
</ol>

<h2 id="discussion">Discussion</h2>

<h3 id="how-does-this-work">How does this work?</h3>

<p><em>Balthisar Tidy</em> uses <code>libtidy-balthisar.dylib</code> within its application bundle.
However macOS’s dynamic loader will give preference to this dylib located in
<code>/usr/local/lib/</code> (even when running in a sandbox).</p>

<h3 id="why-not-make-a-preferences-option-instead">Why not make a Preferences option instead?</h3>

<p>Because of application sandboxing (security) this is the only practical way to offer this
feature to you. There’s nothing within the power of an application to select which
library to link to, so it’s not possible to make this a Preferences option.</p>

<h3 id="why-might-i-want-to-do-this">Why might I want to do this?</h3>

<p>Sometimes HTML Tidy has bugs, and if the version of HTML Tidy that’s built into 
<em>Balthisar Tidy</em> has bugs, then you can be sure that <em>Balthisar Tidy</em> has
bugs, too.</p>

<p>Because HTML Tidy’s development cycle is faster than <em>Balthisar Tidy</em>’s, this gives
you the ability to upgrade <em>Balthisar Tidy</em> without waiting for an upgrade!</p>

<h3 id="why-might-i-not-want-to-do-this">Why might I <em>not</em> want to do this?</h3>

<p>Things might break. While HTML Tidy’s API is fairly stable, things can change. If a new
Tidy Option is added, <em>Balthisar Tidy</em> probably won’t pick it up. If an option’s
description changes, it won’t be reflected in <em>Balthisar Tidy</em>.</p>

<p>If things <em>do</em> break, rest assured that you can restore <em>Balthisar Tidy</em> to its
standard conditions by removing the symlink as described above.</p>

<p class="note"><em>Balthisar Tidy</em> depends on certain API features offered by LibTidy in order to 
function. Currently the oldest version of LibTidy that has a compatible API is
HTML Tidy 5.6.0.</p>


</body>
</html>
