- commence = (defined?(start) && start) || current_page
- pages = commence.legitimate_children
%ul.help_map
  %li<
    = link_to commence.data.title, commence
    = partial 'help_map_inner', :locals => { :start => commence }


    -#- unless pages.to_a.empty?
    -#  %ul
    -#    - pages.each do |p|
    -#      %li<
    -#        = link_to p.data.title, p
    -#        = partial 'help_map_inner', :locals => { :start => p }

-#
  This partial renders nested links into an <ul>. The top level links is the
  start page or current_page, followed by the entire directory structure below
  it.
